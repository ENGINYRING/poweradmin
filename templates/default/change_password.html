<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.php">{% trans %}Home{% endtrans %}</a></li>
        <li class="breadcrumb-item" aria-current="page">{% trans %}Change password{% endtrans %}</li>
    </ol>
</nav>

{% if message %}
<div class="alert alert-{{ message.type }}">{{ message.content }}</div>
{% endif %}

<div class="card">
    <div class="card-header">
        <strong>{{ 'Change Password'|trans }}</strong>
    </div>
    <div class="card-body">
        <p class="small text-muted mb-3">{{ 'Update your account password'|trans }}</p>

        <form class="needs-validation" method="post" action="index.php?page=change_password" novalidate>
            <input type="hidden" name="_token" value="{{ csrf_token }}">

            <div class="row">
                <div class="col-md-5">
                    <!-- Form fields on the left side -->
                    <div class="mb-3">
                        <label for="current_password" class="form-label">{% trans %}Current password{% endtrans %}</label>
                        <div class="input-group input-group-sm">
                            <input type="password" class="form-control form-control-sm" id="current_password" name="old_password" value="" required>
                            <button class="btn btn-sm btn-outline-secondary" type="button" onclick="showPassword('current_password', 'eye1')"><i class="bi bi-eye-fill" id="eye1"></i></button>
                            <div class="invalid-feedback">{% trans %}Provide current password{% endtrans %}</div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="new_password" class="form-label">{% trans %}New password{% endtrans %}</label>
                        <div class="input-group input-group-sm">
                            <input type="password" class="form-control form-control-sm" id="new_password" name="new_password" value="" required>
                            <button class="btn btn-sm btn-outline-secondary" type="button" onclick="showPassword('new_password', 'eye2')"><i class="bi bi-eye-fill" id="eye2"></i></button>
                            <div class="invalid-feedback">{% trans %}Provide new password{% endtrans %}</div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="repeat_password" class="form-label">{% trans %}Repeat password{% endtrans %}</label>
                        <div class="input-group input-group-sm">
                            <input type="password" class="form-control form-control-sm" id="repeat_password" name="new_password2" value="" required>
                            <button class="btn btn-sm btn-outline-secondary" type="button" onclick="showPassword('repeat_password', 'eye3')"><i class="bi bi-eye-fill" id="eye3"></i></button>
                            <div class="invalid-feedback">{% trans %}Provide new password{% endtrans %}</div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <button type="submit" class="btn btn-sm btn-primary">{% trans %}Change password{% endtrans %}</button>
                        <a href="index.php" class="btn btn-sm btn-secondary">{{ 'Cancel'|trans }}</a>
                    </div>
                </div>
                
                <div class="col-md-7">
                    <!-- Information panel on the right side -->
                    <div class="card border-info">
                        <div class="card-header bg-info bg-opacity-10 text-info border-info">
                            <i class="bi bi-info-circle-fill me-2 text-info"></i>{{ 'Password Requirements'|trans }}
                        </div>
                        <div class="card-body">
                            <ul class="mb-0 ps-4">
                                {% if password_policy.enabled %}
                                {% if password_policy.min_length %}
                                <li>{% trans %}Minimum length{% endtrans %}: {{ password_policy.min_length }} {% trans %}characters{% endtrans %}</li>
                                {% endif %}
                                {% if password_policy.require_uppercase %}
                                <li>{% trans %}Must contain uppercase letters{% endtrans %}</li>
                                {% endif %}
                                {% if password_policy.require_lowercase %}
                                <li>{% trans %}Must contain lowercase letters{% endtrans %}</li>
                                {% endif %}
                                {% if password_policy.require_numbers %}
                                <li>{% trans %}Must contain numbers{% endtrans %}</li>
                                {% endif %}
                                {% if password_policy.require_special %}
                                <li>
                                    {% trans %}Must contain special characters{% endtrans %}
                                    <span class="text-muted">({{ password_policy.special_characters }})</span>
                                </li>
                                {% endif %}
                                {% else %}
                                <li>{% trans %}No specific password requirements{% endtrans %}</li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                    
                    <div class="card mt-3 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 text-warning border-warning">
                            <i class="bi bi-exclamation-triangle-fill me-2 text-warning"></i>{{ 'Security Notice'|trans }}
                        </div>
                        <div class="card-body">
                            <p class="card-text mb-0">
                                {{ 'For better security, choose a password that:'|trans }}
                            </p>
                            <ul class="mb-0 ps-4">
                                <li>{{ 'Is not used on other websites'|trans }}</li>
                                <li>{{ 'Is difficult to guess'|trans }}</li>
                                <li>{{ 'Contains a mix of characters'|trans }}</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>