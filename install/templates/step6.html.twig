{% extends 'base.html.twig' %}

{% block title %}
    {% trans %}Step{% endtrans %} {{ current_step }}: {% trans %}Create configuration file{% endtrans %}
{% endblock %}

{% block content %}
    <div class="alert alert-success">
        <strong>{% trans %}Configuration File:{% endtrans %}</strong> {% trans %}Create the file {% endtrans %}
        <em>config/settings.php</em>
        {% trans %} with the following content:{% endtrans %}
    </div>

    <div class="p-3 bg-light rounded">
        <h5>{% trans %}Configuration Format{% endtrans %}</h5>
        <pre class="bg-dark text-light p-3 rounded">
&lt;?php

/**
 * Poweradmin Settings Configuration File
 *
 * Generated by the installer on {{ "now"|date("Y-m-d H:i:s") }}
 */

return [
    /**
     * Database Settings
     */
    'database' => [
{% if db_file %}
        'type' => '{{ db_type }}',
        'file' => '{{ db_name }}',
{% else %}
        'host' => '{{ db_host }}',
        'name' => '{{ db_name }}',
        'user' => '{{ db_user }}',
        'password' => '{{ db_pass }}',
        'type' => '{{ db_type }}',
{% if db_port %}
        'port' => '{{ db_port }}',
{% endif %}
{% if db_charset %}
        'charset' => '{{ db_charset }}',
{% endif %}
{% endif %}
    ],

    /**
     * Security Settings
     */
    'security' => [
        'session_key' => '{{ session_key }}',
    ],

    /**
     * Interface Settings
     */
    'interface' => [
        'language' => '{{ language }}',
    ],

    /**
     * DNS Settings
     */
    'dns' => [
        'hostmaster' => '{{ dns_hostmaster }}',
        'ns1' => '{{ dns_ns1 }}',
        'ns2' => '{{ dns_ns2 }}',
{% if dns_ns3 %}
        'ns3' => '{{ dns_ns3 }}',
{% endif %}
{% if dns_ns4 %}
        'ns4' => '{{ dns_ns4 }}',
{% endif %}
    ],
];
</pre>

    <form method="post" class="mt-4">
        <input type="hidden" name="install_token" value="{{ install_token }}">
        <input type="hidden" name="step" value="{{ next_step }}">
        <input type="hidden" name="language" value="{{ language }}">
        <input type="submit" name="submit" class="btn btn-primary btn-sm"
               value="{% trans %}Go to step{% endtrans %} {{ next_step }}">
    </form>
{% endblock %}